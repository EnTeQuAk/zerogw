Server:
  zmq-io-threads: 1
  disk-io-threads: 1
  listen:
    - host: 0.0.0.0
      port: 8000
  status:
    socket:
    - !zmq.Bind ipc:///tmp/zerogw
  error-log:
    level: 5
    warning-timeout: 300

Routing:
  routing: !Suffix ~
  routing-by: !Header Host
  map:
      "*:8000":
        routing: !Prefix ~
        routing-by: !Uri ~
        map:
            "/": # Fallback page
              responses:
                default:
                  headers:
                    Content-Type: text/html; charset="utf-8"
                  body: !FromFile websocket.html
            "/*":
              static:
                enabled: yes
                root: examples
                deny-suffixes:
                - .py
                deny-prefixes:
                - "."
            "/echo*":
              zmq-forward:
                enabled: yes
                socket:
                - !zmq.Bind "tcp://127.0.0.1:7001"
                contents:
                - !Uri ~
                - !Body ~
                timeout: 2
                retry: !RetryFirst
                  count: 3
            "/chat*":
              websocket:
                enabled: yes
                forward:
                - !zmq.Bind "tcp://127.0.0.1:7002"
                subscribe:
                - !zmq.Bind "tcp://127.0.0.1:7003"
            "/crossdomain.xml":
              responses:
                default:
                  headers:
                    Content-Type: text/xml; charset="utf-8"
                  body: |
                    <?xml version="1.0"?>
                    <cross-domain-policy>
                        <allow-access-from domain="*" />
                    </cross-domain-policy>
